%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Master Thesis - Computer Engineering
%% Copyright 2009 Ricardo Alexandre Fiorelli, Erick Poletto
%% This document is distributed by the terms of the license
%% included in the file LICENCE.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Fourth Chapter
%% Analysis and Results
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Analysis and Results} \label{chap4:analysis_results}
%TODO explicar o que é este capitulo, pra que ele serve, realmente PROCURAR na internet o que geralmente se coloca num capitulo assim
%TODO estudar e escrever o que aprendeu
%
    The objective of this chapter is to describe the designed component database and evaluate it against measured data and data obtained from the component manufacturers. This evaluation will determine the adequacy of power consumption data provided by the database as a means to estimate the power consumption of different machine configurations.
\section{Analysis} \label{sec4:analysis}
%TODO here it is explained the database, how it was built, the database schema and etc\ldots
%TODO
\subsection{Component Database} \label{sec4:component_database}
    The component database will be described in terms of its relations. For each relation its semantic meaning will be explained along with the data it contains and the source of this data. The database schema is present in Figure~\ref{fig:database_schema}.

    \begin{figure}[h!tb]
        \centering
        \includegraphics[scale=0.6]{graphics/database_schema}
        \caption{Component database schema}
        \label{fig:database_schema}
    \end{figure}
%TODO colocar referencias a tabela excel de benchmarks e relations. inserir tabelas no apendice a partir do arquivo characteristics-benchmarks
    \subsubsection*{Classification relations}
        In order to provide an efficient classification of the components, four category relations were used, namely 1CAT, 2CAT, 3CAT and DEVICE. In this hierarchical disposition each component is classified in three levels by the relations 1CAT, 2CAT and 3CAT and then uniquely identified by the DEVICE relation. This classification follows the one present in the website analysed by the crawler\footnote{http://www.sisoftware.net/}.

        \paragraph*{Relation 1CAT}
            The first level of classification is very general as it just states the final usage of the component. As the components used in the database are computer components they will be defined as such in this first level.

        \paragraph*{Relation 2CAT}
            This relation fits the component into one of the main devices of a computer architecture. These are the following: processors, main memory, mass storage device, networking devices, CD/DVD player, mainboard, etc.

        \paragraph*{Relation 3CAT}
            The component is classified in a last level to provide contextual information about its usage. Processors, for example, are defined either as boxed or directly available in an OEM computer configuration. Memory can be used for servers, workstations or notebooks. Network devices can be LAN cards or networking equipment such as routers. Finally, mass storage devices are separated by technology, which can be hard-disk or flash-based.

        \paragraph*{Relation DEVICE}
            The last level is the identification of each component by an unique MPN number. This is the central relation in the database as the pricing, benchmark and characteristic relations are associated to specific components. The MPN information stored here was obtained with the use of the WEBSPHINX crawler over the SiSoftware shopping site\footnote{http://www.sisoftware.net/}. This device relation uses MPN as its key and associates for each component the 3 previous classifications, the component model/name and the date in which it was inserted in the database.
            
    \subsubsection*{Characteristic relations}
        This set of relations associate with each component its specifications, provided by the manufacturer. As SiSoftware Sandra provides these, it was be preferred source for this kind of data. Other sources such as CPU-Z reports and component datasheets were used in case the information could not be found in Sandra.
%TODO referencia no apendice         
        \paragraph*{Relation DEVICE\_CHARACTERISTIC}
            This determines the value of the characteristic being described. The value in char_value can be for example number of cores or clock frequency for a processor, disk rotation or average bandwidth for a hard drive or size and bandwidth for main memory. The attribute CHAR_ID is linked to the following relation in order to define the type of the characteristic.
            
        \paragraph*{Relation CHARACTERISTIC}
            Each characteristic, other than a value associated in the previous relation, should be described in terms of type and measurement unit. One example may be the clock frequency which is measured in MHz. In this relation the attribute CHAR_NAME would be ``clock frequency'', the attribute CHAR_UM would be ``MHz'' and the DESCRIPTION attribute would explain the meaning of the characteristic.
            
        \paragraph*{Relation SOURCE}
            For each component, the source of their characteristics could be either SiSoftware Sandra, the Web or other softwares such as CPU-Z.
            
    \subsubsection*{Benchmark relations}
        The benchmarks were provided by SiSoft Sandra and they were of 2 types: single-value or graph-based. Single value benchmarks provide one value as output, such as power consumption and average performance. Graph-based benchmarks generate a graph by adjusting one parameter and measuring the value of another one. Examples are clock frequency per workload for a processor and bandwidth per data block site for main memory.
%TODO referencia no apendice 
        \paragraph*{Relation BENCHMARK}
            This is the main benchmark relation. It identifies a single benchmark type by giving it a name, measure unit, description and type (attribute MULTIPLE), which can be 0 for single-value or 1 for graph-based. Depending on the MULTIPLE attribute, the benchmark will either be referenced by the DEVICE_BENCHMARK or the BENCHMARK_POINT relations.

        \paragraph*{Relation DEVICE\_BENCHMARK}
            This relation stores one single value for a benchmark. It also references both the reference benchmark and the component.
            
        \paragraph*{Relation BENCHMARK\_POINT}
            This relation stores a series of points as the output of the benchmark. It also references both the reference benchmark and the component.            

    \subsubsection*{Relation PRICE}
        The website used to collect the components MPN codes\footnote{http://www.sisoftware.net/} provided also pricing information about them. The suggested prices were shown together a rating. The rating represents the number of users that suggested a price for the component and the higher it is, greater the credibility of the price information.
                        
\subsection{Overview} \label{sec4:analysis_overview}
    % explicar que a gente pegou as coisas e separou por tabelas, tentar nao ser redundate com o que teve no cap3
    % colocar referencia pra tabelas em XXXXXX
    \subsubsection*{Data insertion into the component database}
        The component database was created by extracting information from SiSoftware Sandra and contains information from component characteristics and benchmarks results. However, this information was not formerly stored as represented by Figure~\ref{fig:database_schema}, but as a set of independent relations without a central component repository. The original schema is described in Appendix~\ref{app:sandra_benchmark_table_schema}.
    
        As SiSoftware Sandra did not provide a centralized component database, to make the creation of the new component database possible a new relation would have to be created in order to associate each component with an unique identification number. The method used to that end is explained in section~\ref{sec3:websphinx}.
    
        The steps taken to populate the final component database were as follows:
        \begin{itemize}
            \item The Sandra database information was extracted into the relations shown in Appendix~\ref{app:sandra_benchmark_table_schema}.
            \item The component-MPN relation was created and populated with the output of the procedure described in section~\ref{sec3:websphinx}.
            \item Each component in the extracted Sandra database was assigned to a unique MPN
            \item The information from the Sandra database were exported to the component database whose schema is in Figure~\ref{fig:database_schema}.
        \end{itemize}
    
    \subsubsection*{Measurements and result analysis}
        
    
\section{Results} \label{sec4:results}
%TODO falar que aqui a gente vai explicar os resultados de todos os métodos
%TODO 
\subsection{Benchmark Results} \label{sec4:benchmark_results}

